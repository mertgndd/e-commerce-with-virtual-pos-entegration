/**
 * @module       RD Parallax
 * @author       Evgeniy Gusarov
 * @see          https://ua.linkedin.com/pub/evgeniy-gusarov/8a/a40/54a
 * @version      3.0.2
 */  
(function(){(function(d,q,n){var m,p,k,l;l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);p=(k=-1!==navigator.appVersion.indexOf("MSIE"))?parseInt(navigator.appVersion.split("MSIE")[1]):null;m=function(){function b(a,e){this.options=d.extend(!0,{},this.Defaults,e);this.$element=d(a);this.$win=d(n);this.$doc=d(q);this.initialize()}b.prototype.Defaults={layerBlur:!0,layerDirection:"inverse",layerSpeed:1,layerDuration:200,layerEasing:"linear"};b.prototype.initialize=
function(){var a;a=this;a.$element.wrapInner(d("<div/>",{"class":"rd-parallax-inner"})).find(".rd-parallax-layer[data-type]").each(function(){var e,c;e=d(this);switch(e.attr("data-type").toLowerCase()){case "media":if(c=this.getAttribute("data-url"))e.css({"background-image":a.url(c)}),("true"===this.getAttribute("data-blur")||a.options.layerBlur)&&d("<img/>",{src:c}).load(function(){e.attr("data-media-width",this.width);e.attr("data-media-height",this.height);a.$win.on("resize",d.proxy(a.blurMedia,
e[0],a));if(l)a.$win.on("orientationchange",d.proxy(a.blurMedia,e[0],a));return d.proxy(a.blurMedia,e[0],a)()});a.$element.on("resize",d.proxy(a.resizeMedia,this,a));a.$element.on("resize",d.proxy(a.moveLayer,this,a));a.$win.on("resize",d.proxy(a.resizeMedia,this,a));if(l)a.$win.on("orientationchange",d.proxy(a.resizeMedia,this,a))}a.$doc.on("scroll",d.proxy(a.moveLayer,this,a));a.$doc.on("resize",d.proxy(a.moveLayer,this,a));if("true"===this.getAttribute("data-fade")&&!k)a.$doc.on("scroll",d.proxy(a.fadeLayer,
this,a));if("true"===this.getAttribute("data-fade")&&!k)a.$doc.on("resize",d.proxy(a.fadeLayer,this,a))});a.$win.trigger("resize");a.$doc.trigger("scroll")};b.prototype.moveLayer=function(a){var e,c,b,f,g,h;f=a.$win.scrollTop();b=a.$element.offset().top;h=a.$win.height();e=a.$element.height();c=this.offsetHeight;parseFloat(g);g=("inverse"===this.getAttribute("data-direction")?-1:"inverse"===a.options.layerDirection?-1:1)*(this.getAttribute("data-speed")?Math.min(parseFloat(this.getAttribute("data-speed")),
2):a.options.layerSpeed);e=-(b-f)*g+(e-c)/2+(h-e)/2*g;return d(this).css(a.transform(e,a))};b.prototype.fadeLayer=function(a,e){var c,b,f,g,h;f=d(this);c=a.$element.height();b=a.$element.offset().top+c/2;g=f.offset().top+f.height()/2;h=c/6;if(b+h>g&&b-h<g)return f.css({opacity:1});c=b-h<g?1+(b+h-g)/c/3*10:1-(b-h-g)/c/3*10;return f.css({opacity:0>c?0:1<c?1:c.toFixed(2)})};b.prototype.blurMedia=function(a){var e,c,b,f;e=this.offsetHeight;f=this.offsetWidth;c=parseFloat(this.getAttribute("data-media-height"));
b=parseFloat(this.getAttribute("data-media-width"));e=Math.ceil(Math.max(e/c,f/b));return d(this).css(a.blur(e))};b.prototype.resizeMedia=function(a){return this.style.height=a.px(a.getMediaHeight(a.$win.height(),a.$element.height(),this.getAttribute("data-speed")?this.getAttribute("data-speed"):a.options.layerSpeed,"inverse"===this.getAttribute("data-direction")?-1:"inverse"===a.options.layerDirection?-1:1))};b.prototype.getMediaHeight=function(a,e,c,b){var d;c=Math.max(parseFloat(c),0);c=Math.min(parseFloat(c),
2);d=0;-1===b&&(d=(e+a)*c);return e+d+(1>=c?(a-e)*c:a*c)};b.prototype.url=function(a){return"url("+a+")"};b.prototype.px=function(a){return a+"px"};b.prototype.transform=function(a,b){return k&&10>p?{transform:"translate(0,"+a+"px)"}:{"-webkit-transform":"translate3d(0,"+a+"px, 0)",transform:"translate3d(0,"+a+"px, 0)",transition:l?""+b.options.layerDuration+"ms transform "+b.options.layerEasing:"none"}};b.prototype.blur=function(a){return 3<a?{"-webkit-filter":"blur("+a+"px)",filter:"blur("+a+"px)"}:
{filter:"none","-webkit-filter":"none"}};return b}();d.fn.extend({RDParallax:function(b){return this.each(function(){var a;a=d(this);if(!a.data("RDParallax"))return a.data("RDParallax",new m(this,b))})}});return n.RDParallax=m})(window.jQuery,document,window);"undefined"!==typeof module&&null!==module?module.exports=window.RDParallax:"function"===typeof define&&define.amd&&define(["jquery"],function(){return window.RDParallax})}).call(this);
